<%- include('./layouts/headerAdmin') %>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
/>

<!-- Start of the flex container -->
<div style="display: flex; flex-direction: column; min-height: 100vh">
  <!-- Reduced the py-20 to py-5 to decrease the gap -->
  <div class="bg-gray-100 py-28 h-auto flex-grow">
    <div class="container">
      <!-- List Brands -->
      <h1 class="mb-8 text-2xl font-semibold">Brands</h1>
      <!-- Display success message -->
      <% if (query.message) { %>
      <div class="alert alert-success" id="success-alert">
        <%= query.message %>
      </div>
      <% } %>
      <!-- Display error message -->
      <% if (query.error) { %>
      <div class="alert alert-danger" id="error-alert"><%= query.error %></div>
      <% } %>
      <div class="text-right mb-4">
        <a
          href="/admin/brand/create"
          class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        >
          Create Brand
        </a>
      </div>

      <table class="table-auto w-full border-collapse border">
        <thead>
          <tr class="bg-gray-200">
            <th class="border px-4 py-2">ID</th>
            <th class="border px-4 py-2">Brand Name</th>
            <th class="border px-4 py-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% brands.forEach(brand => { %>
          <tr>
            <td class="border px-4 py-2"><%= brand._id %></td>
            <td class="border px-4 py-2"><%= brand.brandName %></td>
            <td class="border px-4 py-2">
              <!-- Update Brand Button -->
              <a
                href="/admin/brands/edit/<%= brand._id %>"
                class="text-blue-500 mx-1"
              >
                <i class="fas fa-edit"></i>
              </a>
              <a
                href="/admin/brands/<%= brand._id %>"
                class="text-red-500 mx-1"
              >
                <i class="fas fa-trash-alt"></i>
              </a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
  <!-- Footer -->
  <%- include('./layouts/Footler') %>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var successAlert = document.getElementById("success-alert");
    if (successAlert) {
      successAlert.style.opacity = 1; // Show the alert
      setTimeout(function () {
        successAlert.style.opacity = 0; // Hide after 1 second
      }, 2000);
    }

    var errorAlert = document.getElementById("error-alert");
    if (errorAlert) {
      errorAlert.style.opacity = 1; // Show the alert
      setTimeout(function () {
        errorAlert.style.opacity = 0; // Hide after 2 seconds
      }, 2000);
    }
  });
</script>
<!-- End of the flex container -->
